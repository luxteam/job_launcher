{#- ****************************** GENERAL COLUMNS ****************************** -#}
{#- ------------------------------ TEST CASE ------------------------------ -#}
{%- if column.name == 'test_case' -%}
    {%- if is_head -%}
        <th data-field="test_case" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}">Test case</th>
    {%- else -%}
        <td>{{ item.test_case }}</td>
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ TEST CASE COPY ------------------------------ -#}
{%- if column.name == 'test_case_copy' -%}
    {%- if is_head -%}
        <th data-field="test_case_copy" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}" data-events="copyTestCaseName">
            Test case
            <span class="glyphicon glyphicon-question-sign" aria-haspopup="true" aria-hidden="true"data-toggle="tooltip" data-placement="top" title="Button click copy direct test case link to clipboard"></span>
        </th>
    {%- else -%}
        <td class="
            {%- if item.number_of_tries > 1 -%}
                retries_detected
            {%- endif %}
        "><button class="commonButton" type="button" name="copyDirectLinkButton">{{ item.test_case }}</button></td>
    {%- endif -%}
{%- endif -%}





{#- ****************************** BASELINES AND RESULTS ****************************** -#}
{#- ------------------------------ ORIGINAL IMAGE ------------------------------ -#}
{%- if column.name == 'original_img' -%}
    {%- if is_head -%}
        <th data-field="original_img" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}" data-events="openFullImgSize" data-formatter="metaAJAX">{{ original_render | title }}</th>
    {%- else -%}
        <td class="hatching">
        {%- if item.original_color_path -%}
            {%- if 'thumb256_baseline_color_path' in item -%}
            <img data-src="{{ item.thumb256_original_color_path }}"/>
            {%- else -%}
            <img data-src="{{ item.original_color_path }}"/>
            {%- endif -%}
        {%- else -%}
            Not compared
        {%- endif -%}
        </td>
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ BASELINE IMAGE ------------------------------ -#}
{%- if column.name == 'baseline_img' -%}
    {%- if is_head -%}
        <th data-field="baseline_img" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}" data-events="openFullImgSize" data-formatter="metaAJAX">
            {%- if report_type == 'default' or report_type == 'ec' -%}
                Baseline Color
            {%- elif report_type == 'ct' -%}
                RPR Baseline
            {%- endif -%}
        </th>
    {%- else -%}
        <td class="hatching">
        {%- if item.baseline_color_path -%}

            {%- if template_name == 'local' -%}
                {%- if 'thumb256_baseline_color_path' in item -%}
                <img data-src="{{ item.thumb256_baseline_color_path }}"/>
                {%- else -%}
                <img data-src="{{ item.baseline_color_path }}"/>
                {%- endif -%}
            {%- elif template_name == 'detailed' -%}
                {%- if 'thumb64_baseline_color_path' in item -%}
                <img data-src="{{ item.thumb64_baseline_color_path }}"/>
                {%- else -%}
                <img data-src="{{ item.baseline_color_path }}"/>
                {%- endif -%}
            {%- endif -%}

        {%- else -%}
            Not compared
        {%- endif -%}
        </td>
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ RENDERED IMAGE ------------------------------ -#}
{%- if column.name == 'rendered_img' -%}
    {%- if is_head -%}
        <th data-field="rendered_img" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}" data-events="openFullImgSize" data-formatter="metaAJAX">
            {%- if report_type == 'default' or report_type == 'ec' -%}
                Rendered color
            {%- elif report_type == 'ct' -%}
                RPR
            {%- endif -%}
        </th>
    {%- else -%}
        <td class="hatching">

            {%- if template_name == 'local' -%}
                {%- if 'thumb256_render_color_path' in item -%}
                <img data-src="{{ item.thumb256_render_color_path }}"/>
                {%- else -%}
                <img data-src="{{ item.render_color_path }}"/>
                {%- endif -%}
            {%- elif template_name == 'detailed' -%}
                {%- if 'thumb64_render_color_path' in item -%}
                <img data-src="{{ item.thumb64_render_color_path }}"/>
                {%- else -%}
                <img data-src="{{ item.render_color_path }}"/>
                {%- endif -%}
            {%- endif -%}

        </td>
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ ERROR SCREEN ------------------------------ -#}
{%- if column.name == 'error_screen' -%}
    {%- if is_head -%}
        <th data-field="error_screen" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}" data-events="openFullErrorScreen" data-formatter="metaAJAX">Error screen
        </th>
    {%- else -%}
        <td class="hatching">
        {%- if item.error_screen_path -%}

            {%- if template_name == 'local' -%}
                {%- if 'thumb256_error_screen_path' in item -%}
                <img data-src="{{ item.thumb256_error_screen_path }}"/>
                {%- else -%}
                <img data-src="{{ item.error_screen_path }}"/>
                {%- endif -%}
            {%- elif template_name == 'detailed' -%}
                {%- if 'thumb64_error_screen_path' in item -%}
                <img data-src="{{ item.thumb64_error_screen_path }}"/>
                {%- else -%}
                <img data-src="{{ item.error_screen_path }}"/>
                {%- endif -%}
            {%- endif -%}

        {%- else -%}
            No screenshots available
        {%- endif -%}
        </td>
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ SCREENS CAROUSEL ------------------------------ -#}
{%- if column.name == 'screens_carousel' -%}
    {%- if is_head -%}
        <th data-field="screens_carousel" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}" data-formatter="metaAJAX">Screens (click to open all screens)
        </th>
    {%- else -%}
        <td class="hatching">
            {%- if item.screens_collection is defined and item.screens_collection | length > 0 -%}

                {%- if template_name == 'local' -%}
                    <img data-src="{{ item.screens_collection[0].thumb256 }}" onclick="openCarousel('{{ item.test_case }}')"/>
                {%- elif template_name == 'detailed' -%}
                    <img data-src="{{ item.screens_collection[0].thumb64 }}" onclick="openCarousel('{{ item.test_case }}')"/>
                {%- endif -%}

                <div class="popup" id="carouselPopup_{{ item.test_case }}">
                    <div class="popupContent imgModalContent">
                        <form class="popupForm">
                            <button class="commonButton closePopup" type="button" onclick="closeModalWindow('carouselPopup_{{ item.test_case }}'); return false;"><img src="{{ pre_path }}/report_resources/img/close-button.png"/></button>
                        </form>

                        <div id="carouselContainer_{{ item.test_case }}" class="carouselContainer">
      
                            <div class="col-md-12 hidden-sm hidden-xs carouselThumbnailsContainer">
                                <ul class="list-inline">
                                    {% for screen in item.screens_collection %}
                                        <li><a id="carouselThumbnail-{{ item.test_case }}-{{loop.index - 1}}" class="{% if loop.index == 1 %}selected{% endif %} carouselThumbnail" onclick="changeActiveThumbnail(this, '{{ item.test_case }}', {{loop.index - 1}})">
                                        <img loading="lazy" data-src="{{ screen.thumb64 }}" id="carouselThumbnailImg-{{ item.test_case }}-{{loop.index - 1}}"/>
                                        </a></li>
                                    {% endfor %}
                                </ul>
                            </div>
      
      
                            <div class="col-md-12 carousel" id="slider">
                                <div id="carousel_{{ item.test_case }}" class="carousel slide">
                                    <div class="carousel-inner">
                                        {% for screen in item.screens_collection %}
                                            <div class="{% if loop.index == 1 %}active{% endif %} item" data-slide-number="{{loop.index - 1}}">
                                                <img loading="lazy" data-src="{{ screen.path }}" class="img-responsive" id="carouselImg-{{ item.test_case }}-{{loop.index - 1}}">
                                                <div class="imageDescription">{{ screen.name }}</div>
                                            </div>
                                        {% endfor %}
                                    </div>
                                    
                                    <a class="carousel-control left" href="#carousel_{{ item.test_case }}" data-slide="prev"></a>

                                    <a class="carousel-control right" href="#carousel_{{ item.test_case }}" data-slide="next"></a>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            {%- else -%}
                No screenshots available
            {%- endif -%}
        </td>
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ VIDEO ------------------------------ -#}
{%- if column.name == 'video' -%}
    {%- if is_head -%}
        <th data-filed="video" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}">Video</th>
    {%- else -%}
        <td class="hatching">
            {%- if item.video_path is defined -%}
                {%- if template_name == 'local' -%}
                    <video width="300" preload="metadata" onclick="clickOnVideo(this)">
                        <source src="{{ item.video_path }}">
                    </video>
                {%- elif template_name == 'detailed' -%}
                    <video width="64" preload="metadata" onclick="clickOnVideo(this)">
                        <source src="{{ item.video_path }}">
                    </video>
                {%- endif -%}
            {% else %}
                No video available
            {% endif %}
        </td>
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ INFO ------------------------------ -#}
{%- if column.name == 'info' -%}
    {%- if is_head -%}
        <th data-filed="info" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}">Info</th>
    {%- else -%}
        {%- if report_type == 'default' -%}
            <td class="infoColumn">
                <b>Scene:</b> {{ item.scene_name }}<br/>

                {% if show_render_time %}
                    <b>Render time:</b> {{ item.render_time | round(3) }}<br/>

                    <b>Baseline render time: </b> 
                    {%- if item.baseline_info is defined -%}
                        {{ item.baseline_info.render_time | round(3) }}
                    {%- else -%}
                        No data
                    {%- endif -%}
                    <br/>
                {% endif %}

                <b>Test info:</b><br/>
                {%- for param in item.script_info -%}
                    {{ param }}<br/>
                {%- endfor -%}
            </td>
        {%- elif report_type == 'perf' and tool_name == 'ml' -%}
            <td class="infoColumn">
                {%- if item.onnx -%}
                    <b>ONNX file:</b> {{ item.onnx }}<br/>
                {%- endif -%}
                {%- if item.csv -%}
                    <b>CSV file:</b> {{ item.csv }}<br/>
                {%- endif -%}
                {%- if item.bin -%}
                    <b>BIN file:</b> {{ item.bin }}<br/>
                {%- endif -%}

                {% if show_render_time %}
                    <b>Render time:</b> {{ item.render_time | round(3) }}<br/>
                {% endif %}
            </td>
        {%- elif report_type == 'ec' -%}
            <td class="infoColumn {{ item.test_status }}Status">
                <b>Test status:</b> {{ item.test_status }}<br/>
                <b>Baseline GPU:</b> {{ item.baseline_render_device }}<br/>
                <b>Scene:</b> {{ item.scene_name }}<br/>
                {%- if item.core_scene_configuration != 'not.exist' -%}
                    <b>Scene conf.:</b> <a class="highlightedLink" href="{{ item.core_scene_configuration }}">OPEN</a> <a class="highlightedLink" href="{{ item.core_scene_configuration }}" download>DOWNLOAD</a><br/>
                {%- endif -%}

                {% if show_render_time %}
                    <b>Render time:</b> {{ item.render_time | round(3) }}<br/>
                    <b>Baseline render time: </b> 
                    {%- if item.baseline_info is defined -%}
                        {{ item.baseline_info.render_time | round(3) }}
                    {%- else -%}
                        No data
                    {%- endif -%}
                    <br/>
                {% endif %}

                <b>GPU memory usage:</b> {{ item.gpu_memory_usage | round(3) }}<br/>
                <b>Baseline GPU memory usage:</b> {{ item.baseline_gpu_memory_usage | round(3) }}<br/>
                <b>GPU memory total:</b> {{ item.gpu_memory_total }}<br/>
                <b>GPU memory max:</b> {{ item.gpu_memory_max }}<br/>
                <b>System memory usage:</b> {{ item.system_memory_usage }}<br/>
                <b>Width:</b> {{ item.width }}<br/>
                <b>Height:</b> {{ item.height }}<br/>
                <b>Iterations:</b> {{ item.iterations }}
            </td>
        {%- elif report_type == 'streaming_sdk' -%}
            <td class="infoColumn">
                <b>Server configuration:</b> {{ item.server_configuration }}<br/>
                <b>Client configuration:</b> {{ item.client_configuration }}<br/>

                {%- if item.min_server_latency is defined and item.max_server_latency is defined -%}
                    <b>Server latency:</b> {{ item.min_server_latency }} - {{ item.max_server_latency }}<br/>
                {%- endif -%}
                {%- if item.min_client_latency is defined and item.max_client_latency is defined -%}
                    <b>Client latency:</b> {{ item.min_client_latency }} - {{ item.max_client_latency }}<br/>
                {%- endif -%}

                <b>Transport protocol:</b> {{ item.transport_protocol }}<br/>

                <b>Test info:</b><br/>
                {%- for param in item.script_info -%}
                    {{ param }}<br/>
                {%- endfor -%}

                {%- if item.message -%}
                    <b>Message:</b> {{ item.message | join('. ') }}<br/>
                {%- endif -%}
            </td>
        {%- endif -%}
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ BASELINE INFO ------------------------------ -#}
{%- if column.name == 'baseline_info' -%}
    {%- if is_head -%}
        <th data-filed="baseline_info" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}">Baseline info</th>
    {%- else -%}
        {%- if item.baseline_info is defined -%}
            {%- if report_type == 'default' -%}
                <td class="infoColumn">
                    <b>Tool version:</b> {{ item.baseline_info.tool }}<br/>
                    <b>Plugin version:</b> {{ item.baseline_info.render_version }}<br/>
                    <b>Core version:</b> {{ item.baseline_info.core_version }}<br/>
                    {% if show_render_time %}
                        <b>Render time:</b> {{ item.baseline_info.render_time | round(3) }}<br/>
                        {%- if item.baseline_info.sync_time is defined -%}
                            <b>Synchronization time:</b> {{ item.baseline_info.sync_time | round(3) }}<br/>
                        {% endif %}
                    {% endif %}
                </td>
            {%- elif report_type == 'ec' -%}
                <td class="infoColumn">
                    <b>Tool version:</b> {{ item.baseline_info.tool }}<br/>
                    <b>Minor version:</b> {{ item.baseline_info.minor_version }}<br/>
                    <b>Core version:</b> {{ item.baseline_info.core_version }}<br/>
                    {% if show_render_time %}
                        <b>Render time:</b> {{ item.baseline_info.render_time | round(3) }}<br/>
                        {%- if item.baseline_info.sync_time is defined -%}
                            <b>Synchronization time:</b> {{ item.baseline_info.sync_time | round(3) }}<br/>
                        {% endif %}
                    {% endif %}
                </td>
            {%- endif -%}
        {%- else -%}
            <td>No data</td>
        {%- endif -%}
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ PARAMETERS ------------------------------ -#}
{%- if column.name == 'parameters' -%}
    {%- if is_head -%}
        <th data-field="parameters" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}">Parameters</th>
    {%- else -%}
        <td>
            {%- for param in item.script_info -%}
            {{ param }}<br>
            {%- endfor -%}
        </td>
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ LATENCY ------------------------------ -#}
{%- if column.name == 'latency' -%}
    {%- if is_head -%}
        <th data-field="latency" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}">Latency</th>
    {%- else -%}
        <td>
            {%- if item.min_server_latency is defined and item.max_server_latency is defined -%}
                <b>Server latency:</b> {{ item.min_server_latency }} - {{ item.max_server_latency }}<br/>
            {%- endif -%}
            {%- if item.min_client_latency is defined and item.max_client_latency is defined -%}
                <b>Client latency:</b> {{ item.min_client_latency }} - {{ item.max_client_latency }}<br/>
            {%- endif -%}
        </td>
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ TEST STATUS NEW ------------------------------ -#}
{%- if column.name == 'test_status_new' -%}
    {%- if is_head -%}
        <th data-field="test_status_new" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}">Test case status</th>
    {%- else -%}
        <td class="infoColumn {{ item.test_status }}Status
            {% if 'Unacceptable time difference' in item.message -%}
                perf_leak
            {%- endif -%}
            ">
            <b>
            {%- if report_type == 'default' -%}
                {%- if item.difference_color_2 != 0 -%}
                    &times; 
                {%- else -%}
                    &check; 
                {%- endif %}
                Pixel difference status
                <span class="glyphicon glyphicon-question-sign" aria-haspopup="true" aria-hidden="true"data-toggle="tooltip" data-placement="top" title="[1] - diff images.
[0] - equals images.
[-1] - images has diff resolution, so couldn't be compared.
[2] - rendered unexpected full black image."></span> :
                </b> {{ item.difference_color_2 }}<br/>
            {%- else -%}
                {%- if item.test_status == 'failed' -%}
                    &times; 
                {%- else -%}
                    &check; 
                {%- endif %}
                Pixel difference:</b> {{ item.difference_color }} %<br/>
            {%- endif -%}


            {%- if item.testcase_timeout != 0 -%}
                <b>
                {%- if not item.testcase_timeout_exceeded -%}
                    &check;
                {%- else -%}
                    &times;
                {%- endif %}
                Testcase timeout:</b> {{ item.testcase_timeout }}<br/>
            {%- endif -%}


            <b>
            {%- if not item.group_timeout_exceeded -%}
                &check; 
            {%- else -%}
                &times; 
            {%- endif %}
            Test case finished</b><br/>


            {% if show_render_time and item.difference_time != -0.0 %}
                <b>
                {%- if not item.has_time_diff -%}
                    &check; 
                {%- else -%}
                    &times; 
                {%- endif %}

                Difference render time:</b> {{ item.difference_time | round(3) }} %<br/>
            {% endif %}

            {%- if item.message -%}
                <b>Message:</b> {{ item.message | join('. ') }}<br/>
            {%- endif -%}
        </td>
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ RENDER TIME DIFFERENCE ------------------------------ -#}
{%- if column.name == 'time_diff' and show_render_time -%}
    {%- if is_head -%}
        <th data-field="time_diff" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}">Render time diff, %</th>
    {%- else -%}
        {%- if report_type == 'default' -%}
            <td {% if config.TIME_DIFF_MAX < item.difference_time -%}
                class="timeWorseStatus"
            {% elif item.difference_time < -config.TIME_DIFF_MAX -%}
                class="timeBetterStatus"
            {% endif -%}
            >
            {{ item.difference_time | round (3) }}</td>
        {%- elif report_type == 'ec' or report_type == 'ct' -%}
            <td
                {% if item.time_diff_status is defined and item.time_diff_status == config.TEST_DIFF_STATUS and item.test_status != config.TEST_CRASH_STATUS -%}
                    class="{{ config.TEST_DIFF_STATUS }}Status"
                {% else -%}
                    class="{{ config.TEST_SUCCESS_STATUS }}Status"
                {% endif -%}
            >{{ item.difference_time | round (3) }}</td>
        {%- endif -%}

    {%- endif -%}
{%- endif -%}





{#- ****************************** OTHER INFO ****************************** -#}
{#- ------------------------------ PIXELS DIFFERENCE NEW ------------------------------ -#}
{%- if column.name == 'pix_diff_2' -%}
    {%- if is_head -%}
        <th data-field="pix_diff_2" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}">
            Diff new
            <span class="glyphicon glyphicon-question-sign" aria-haspopup="true" aria-hidden="true"data-toggle="tooltip" data-placement="top" title="[1] - diff images.
[0] - equals images.
[-1] - images has diff resolution, so couldn't be compared.
[2] - rendered unexpected full black image."></span>
        </th>
    {%- else -%}
        <td
            {% if item.difference_color_2 != 0 -%}
                class="{{ config.TEST_DIFF_STATUS }}Status"
            {% else -%}
                class="{{ config.TEST_SUCCESS_STATUS }}Status"
            {% endif -%}
        >{{ item.difference_color_2 }}</td>
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ TEST STATUS ------------------------------ -#}
{%- if column.name == 'test_status' -%}
    {%- if is_head -%}
        <th data-field="test_status" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}">Test status

            {%- if report_type == 'streaming_sdk' %}
                <span class="glyphicon glyphicon-question-sign" aria-haspopup="true" aria-hidden="true"data-toggle="tooltip" data-placement="top" title="[Failed] status means that maximum value of latency on client or on server was more than or equals to 100 but less than 300.
[Error] status means that maximum value of latency on client or on server was more than or equals to 300.
[Skipped] status means case wasn't launched by QA team decision."></span>
            {%- else %}
                <span class="glyphicon glyphicon-question-sign" aria-haspopup="true" aria-hidden="true"data-toggle="tooltip" data-placement="top" title="[Failed] status means that pixel difference with baseline image is too large.
[Error] status means fatal error during render, terminating by timeout, or case wasn't launched at all.
[Skipped] status means case wasn't launched by QA team decision."></span>
            {%- endif -%}

        </th>
    {%- else -%}
        {#- Colorize passed status for ML Performance reports -#}
        {%- if report_type == 'perf' and tool_name == 'ml' and item.test_status == 'passed' -%}
            {%- set status_postfix = 'Colored' -%}
        {%- elif report_type == 'streaming_sdk' and item.test_status == 'passed' -%}
            {%- set status_postfix = 'Colored' -%}
        {%- else -%}
            {%- set status_postfix = '' -%}
        {%- endif -%}
        <td class="{{ item.test_status }}Status{{ status_postfix }}">{{ item.test_status | title }}</td>
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ PERFORMANCE HISTORY ------------------------------ -#}
{%- if column.name == 'performance_history' -%}
    {%- if is_head -%}
        <th data-field="performance_history" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}">Performance history</th>
    {%- else -%}
        {% if groupped_tracked_metrics and tracked_metrics_history %}
            <td>
                {%- set performance_window_name = "performanceWindow-" + platform + "-" + common_info.test_group + "-" + item.test_case -%}
                {%- set performance_chart_name = "performanceChart-" + platform + "-" + common_info.test_group + "-" + item.test_case -%}
                <button class="commonButton popupButton" type="button" onclick="changeMetric('{{ performance_chart_name }}', '{{ (groupped_tracked_metrics.keys() | list)[-1] }}');openModalWindow('{{ performance_window_name }}');return false;">Open history</button>
                {% with performance_window_scope="test_case", test_group=common_info.test_group, test_case=item.test_case -%}
                    {%- include 'performance_history_tab.html' -%}
                {%- endwith %}
            </td>
        {% endif %}
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ CASE FUNCTIONS ------------------------------ -#}
{%- if column.name == 'case_functions' -%}
    {%- if is_head -%}
        <th data-field="case_functions" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}">Case functions
        </th>
    {%- else -%}
        <td>
            {% for function in item.case_functions %}
                {{ function }}<br>
            {% endfor %}
        </td>
    {%- endif -%}
{%- endif -%}

{#- ****************************** RENDER TIME ****************************** -#}
{#- ------------------------------ RENDER TIME ------------------------------ -#}
{%- if column.name == 'render_time' and show_render_time -%}
    {%- if is_head -%}
        <th data-field="render_time" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}" data-formatter="timeFormatterFull">
            {%- if report_type == 'default' or report_type == 'ec' or report_type == 'perf' -%}
                Render time
            {%- elif report_type == 'ct' -%}
                RPR render time
            {%- endif -%}
        </th>
    {%- else -%}
        {%- if report_type == 'default' or report_type == 'ec' or report_type == 'perf' -%}
            <td>{{ item.render_time | round(3) }}</td>
        {%- elif report_type == 'ct' -%}
            <td>{{ item.render_time }}</td>
        {%- endif -%}
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ BASELINE RENDER TIME ------------------------------ -#}
{%- if column.name == 'baseline_render_time' and show_render_time -%}
    {%- if is_head -%}
        <th data-field="baseline_render_time" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}" data-formatter="timeFormatterFull">Baseline render time
        </th>
    {%- else -%}
        {%- if item.baseline_info is defined and item.baseline_info.render_time is defined -%}
            <td>{{ item.baseline_info.render_time | round(3) }}</td>
        {%- else -%}
            <td>No data</td>
        {%- endif -%}
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ ORIGINAL RENDER TIME ------------------------------ -#}
{%- if column.name == 'original_time' and show_render_time -%}
    {%- if is_head -%}
        <th data-field="original_time" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}" data-formatter="timeFormatterFull">{{ original_render | title }} render time
        </th>
    {%- else -%}
        <td>{{ item.or_render_time }}</td>
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ RENDER GPU RAM ------------------------------ -#}
{%- if column.name == 'render_vram' -%}
    {%- if is_head -%}
        <th data-field="render_vram" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}">Render GPU RAM, Mb</th>
    {%- else -%}
        <td>{{ item.gpu_memory_usage | round(3) }}</td>
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ BASELINE GPU RAM ------------------------------ -#}
{%- if column.name == 'baseline_vram' -%}
    {%- if is_head -%}
        <th data-field="baseline_vram" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}">Baseline GPU RAM, Mb</th>
    {%- else -%}
        <td>{{ item.baseline_gpu_memory_usage | round(3) }}</td>
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ GPU RAM DIFF ------------------------------ -#}
{%- if column.name == 'vram_diff' -%}
    {%- if is_head -%}
        <th data-field="vram_diff" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}">GPU RAM diff, %</th>
    {%- else -%}
        <td {% if config.VRAM_DIFF_MAX < item.difference_vram -%}
                class="timeWorseStatus"
            {%- elif item.difference_vram < -config.VRAM_DIFF_MAX -%}
                class="timeBetterStatus"
            {%- endif -%}
            >
            {{ item.difference_vram | round(3) }}</td>
    {%- endif -%}
{%- endif -%}

{#- ------------------------------ PIXEL DIFF ------------------------------ -#}
{%- if column.name == 'pix_diff' -%}
    {%- if is_head -%}
        <th data-field="pix_diff" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}">Pixel diff, %</th>
    {%- else -%}
        <td class="{{ item.test_status }}Status">{{ item.difference_color }}</td>
    {%- endif -%}
{%- endif -%}





{#- ****************************** LOGS ****************************** -#}
{#- ------------------------------ RENDER LOG ------------------------------ -#}
{%- if column.name == 'render_log' -%}
    {%- if is_head -%}
        <th data-field="render_log" data-halign="{{ column.data_halign }}" data-valign="{{ column.data_valign }}" data-sortable="{{ column.data_sortable }}" data-visible="{{ column.data_visible }}">Log files</th>
    {%- else -%}
        {%- if report_type == 'default' or report_type == 'perf' -%}
            <td>
                {%- if show_render_log -%}

                    {%- if 'render_log' in item -%}
                        <a href="{{ item.render_log }}">Render log</a>
                    {%- else -%}

                        {%- if template_name == 'local' -%}
                            <a href="{{ config.REPORT_RPR_LOG }}">Render log</a>
                        {%- elif template_name == 'detailed' -%}
                            <a href="{{ report[i].results[test_package][test_conf].result_path }}/{{ config.REPORT_RPR_LOG }}">Render Log</a>
                        {%- endif -%}

                    {%- endif -%}<br/>

                {%- endif -%}

                {%- if 'execution_log' in item -%}
                    <a href="{{ item.execution_log }}">Execution log</a>
                {%- endif -%}
            </td>
        {%- elif report_type == 'ec' -%}
            <td>
                {%- if item.tahoe_log != 'not.exist' -%}

                    {%- if template_name == 'local' -%}
                        <a href="{{ item.tahoe_log }}">tahoe Log</a>
                    {%- elif template_name == 'detailed' -%}
                        <a href="{{ report[i].results[test_package][test_conf].result_path }}/{{ item.tahoe_log }}">tahoe Log</a>
                    {%- endif -%}

                {%- else -%}
                    None
                {%- endif -%}
            </td>
        {%- elif report_type == 'ct' -%}
            <td>
                <a href="{{ item.original_render_log }}">{{ original_render | title }} log</a><br/>

                {%- if template_name == 'local' -%}
                    <a href="{{ item.scene_name }}.{{ config.REPORT_CONVERSION_LOG }}">Conversion log</a><br/>
                    <a href="{{ config.REPORT_RPR_LOG }}">RPR log</a>
                {%- elif template_name == 'detailed' -%}
                    <a href="{{ report[i].results[test_package][test_conf].result_path }}/{{ item.scene_name }}.{{ config.REPORT_CONVERSION_LOG }}">Conversion log</a><br/>
                    <a href="{{ report[i].results[test_package][test_conf].result_path }}/{{ config.REPORT_RPR_LOG }}">RPR Log</a>
                {%- endif -%}

            </td>
        {%- elif report_type == 'streaming_sdk' -%}
            <td>
                {%- if show_render_log -%}

                    {%- if 'server_log' in item -%}
                        {%- if template_name == 'local' -%}
                            <a href="{{ item.server_log }}">Server log</a><br/>
                        {%- elif template_name == 'detailed' -%}
                            <a href="{{ report[i].results[test_package][test_conf].result_path }}/{{ item.server_log }}">Server log</a><br/>
                        {%- endif -%}
                    {%- endif -%}

                    {%- if 'client_log' in item -%}
                        
                        {%- if template_name == 'local' -%}
                            <a href="{{ item.client_log }}">Client log</a><br/>
                        {%- elif template_name == 'detailed' -%}
                            <a href="{{ report[i].results[test_package][test_conf].result_path }}/{{ item.client_log }}">Client log</a><br/>
                        {%- endif -%}
                    {%- endif -%}

                {%- endif -%}
            </td>
        {%- endif -%}
    {%- endif -%}
{%- endif -%}
