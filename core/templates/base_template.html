<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="{{ pre_path }}/report_resources/css/bootstrap.css"/>
    <link rel="stylesheet" type="text/css" href="{{ pre_path }}/report_resources/css/bootstrap-table.css"/>
    <link rel="stylesheet" type="text/css" href="{{ pre_path }}/report_resources/css/style.css"/>
    <link rel="stylesheet" type="text/css" href="{{ pre_path }}/report_resources/css/test-statuses.css"/>

    <script src="{{ pre_path }}/report_resources/js/thirdparty/jquery-3.3.1.min.js" type="text/javascript"></script>

    <script src="{{ pre_path }}/report_resources/js/thirdparty/bootstrap.js" type="text/javascript"></script>
    <script src="{{ pre_path }}/report_resources/js/thirdparty/bootstrap-table.js" type="text/javascript"></script>
    <script src="{{ pre_path }}/report_resources/js/extensions/multiple-sort/bootstrap-table-multiple-sort.js"></script>
    <script src="{{ pre_path }}/report_resources/js/extensions/toolbar/bootstrap-table-toolbar.js"></script>

    <script src="{{ pre_path }}/report_resources/js/scripts.js" type="text/javascript"></script>

    <script src="{{ pre_path }}/report_resources/js/thirdparty/pixelmatch.js"></script>
    <script src="{{ pre_path }}/report_resources/js/thirdparty/opencv.js"></script>
    <script src="{{ pre_path }}/report_resources/js/images-substr.js"></script>
    <script src="{{ pre_path }}/report_resources/js/bootstrap-table-custom.js"></script>

    <script type="text/javascript">
        $(document).ready(function init(){
        {% if pageID is defined %}
            setActive({{ pageID }});
        {% endif %}
        });
    </script>

    {% if performance_report is defined %}
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <script type="text/javascript">
      var toolColors = ['#a228', '#2a28', '#22a8']

      window.onload = function () {
        var ctx = document.getElementById('columnchartRender').getContext('2d');
        var chart = new Chart(ctx, {
            type: 'bar',

            data: {
                labels: [
                    {% for hw in hardware %}
                      '{{ hw[0] }}'{{ "," if not loop.last }}
                    {% endfor %}
                  ],

                datasets: [
                  {% for tool in test_info %}
                    {
                      label: '{{ tool }}',
                      backgroundColor: toolColors[{{ loop.index }} % toolColors.length],
                      data: [
                        {% for hw in hardware %}
                          '{{ test_info[tool][hw[0]].render }}'{{ "," if not loop.last }}
                        {% endfor %}
                      ]
                    }{{ "," if not loop.last }}
                  {% endfor %}
                ]
            },

            options: {
              maintainAspectRatio: false,
              legend: {position: 'right'},
              title: {
                display: true,
                text: 'Total synchronization time'
              },
              scales: {
                xAxes: [{stacked: true}],
                yAxes: [{stacked: true}]
              }
            }
        });

        var ctx = document.getElementById('columnChartSync').getContext('2d');
        var chart = new Chart(ctx, {
            type: 'bar',

            data: {
                labels: [
                    {% for hw in hardware %}
                      '{{ hw[0] }}'{{ "," if not loop.last }}
                    {% endfor %}
                  ],

                datasets: [
                  {% for tool in test_info %}
                    {
                      label: '{{ tool }}',
                      backgroundColor: toolColors[{{ loop.index }} % toolColors.length],
                      data: [
                        {% for hw in hardware %}
                          '{{ test_info[tool][hw[0]].sync }}'{{ "," if not loop.last }}
                        {% endfor %}
                      ]
                    }{{ "," if not loop.last }}
                  {% endfor %}
                ]
            },

            options: {
              maintainAspectRatio: false,
              legend: {position: 'right'},
              title: {
                display: true,
                text: 'Total synchronization time'
              },
              scales: {
                xAxes: [{stacked: true}],
                yAxes: [{stacked: true}]
              }
            }
        });
      }
    </script>
    {% endif %}

    <title>{{ title }}</title>
</head>

<body>
    <a name="#top"/>
    <a id="goTop" href="#top" title="Go top"><span class="glyphicon glyphicon-arrow-up" aria-hidden="true" aria-label="Go top"></span></a>

    <div id="infoBox"></div>

    <div id="header">
        <img src="{{ pre_path}}/report_resources/img/logo.png"/>

        <ul>
            <li><a id="summaryA" href='{{ pre_path }}/summary_report.html'>summary</a></li>
            <li><a id="performanceA" href='{{ pre_path }}/performance_report.html'>performance</a></li>
            <li><a id="compareA" href='{{ pre_path }}/compare_report.html'>compare</a></li>
        </ul>
    </div>

    {% include "base_table_block.html" %}

    <hr>

    {% block report_body %}
    {% endblock %}

    <hr>

    <div id="footer">
        Luxoft RPR CIS
        <br>
        2017-2020
        <br>
        jobs_launcher v{{ "v" | get_jobs_launcher_version() }}
    </div>

</body>
</html>